<div class="game-hero">
  <div class="game-card">
    <header class="game-header">
      <a routerLink="/" class="back-btn" aria-label="Back to home">‚Üê</a>
      <span class="header-title">Tripod</span>
      <div class="header-actions">
        <app-past-date-selector [iconOnly]="true" (dateSelected)="onDateChosen($event)"></app-past-date-selector>
        <button class="icon-btn" (click)="showPast = true" aria-label="Show past submissions">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </button>
      </div>
    </header>

    <app-triangle
      [submitted]="submitted"
      [letters]="currentLetters"
      [category]="currentCategory"
      [aggregatedCorrect]="aggregatedCorrectLetters"
      [aggregatedValidation]="aggregatedValidation"
      [allWrong]="allWrong"
      (valuesChanged)="onValuesChanged($event)"
      (valuesSubmitted)="onValuesSubmitted($event)"
      [resetCounter]="resetCounter"
    ></app-triangle>

    <div class="action-row">
      <app-submit-button [shake]="submitShake" (submit)="onSubmit()"></app-submit-button>
      <app-reset-button (reset)="onReset()"></app-reset-button>
    </div>
  </div>
</div>

<app-past-submissions
  *ngIf="showPast"
  [submissions]="filteredSubmissions"
  [letters]="currentLetters"
  (close)="showPast = false"
></app-past-submissions>

<div
  class="congrats-modal"
  *ngIf="congratsOpen"
  (click)="congratsOpen = false"
  tabindex="0"
>
  <div class="congrats-content" (click)="$event.stopPropagation()">
    <h2>Congratulations!</h2>
    <p>You solved the puzzle!!!</p>
    <button (click)="congratsOpen = false" class="primary">Close</button>
  </div>
</div>
